name: echoService
metadata:
  name: echoService
  version: 1.0.0
  description: A simple python-based API responding to a POST message with the "text" field. The function exposes an API using "serve" task.
  labels:
    - "license:apache-2.0"
    - "domain:other"
    - "platform:0.14"
    - "type:service"
    - "phase:utility"
    - "inference:custom"
kind: python
spec:
  python_version: PYTHON3_10
  source: 
   handler: serve
   base64: aW1wb3J0IGpzb24KCmRlZiBpbml0KGNvbnRleHQpOgogICAgcHJpbnQoInNvbWUgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24iKQogICAgc2V0YXR0cihjb250ZXh0LCAidmFsdWUiLCAic29tZSB2YWx1ZSIpCgpkZWYgc2VydmUoY29udGV4dCwgZXZlbnQpOgoKICAgIGlmIGlzaW5zdGFuY2UoZXZlbnQuYm9keSwgYnl0ZXMpOgogICAgICAgIGJvZHkgPSBqc29uLmxvYWRzKGV2ZW50LmJvZHkpCiAgICBlbHNlOgogICAgICAgIGJvZHkgPSBldmVudC5ib2R5CiAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGYiUmVjZWl2ZWQgZXZlbnQ6IHtib2R5fSIpCiAgICB0ZXh0ID0gYm9keVsidGV4dCJdCgogICAgcmV0dXJuIHsicmVzdWx0IjogZiJoZWxsbyB7dGV4dH0gZnJvbSAne2NvbnRleHQudmFsdWV9JyJ9
   lang: python
   init_function: init
---
kind: python+serve
spec:
  service_type: ClusterIP
  service_name: echoService