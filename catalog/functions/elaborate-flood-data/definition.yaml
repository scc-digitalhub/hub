kind: container
metadata:
  name: Elaborate Flood Data
  description: Function to elaborate flood data using Sentinel-1 and Sentinel-2 imagery
  version: 0.14.6  
  labels:
    - 'license:apache-2.0'
    - 'domain:geo'
    - 'application:pa'
    - 'aspect:security'
    - 'platform:0.14'
    - 'type:job'
    - 'phase:feature-extraction'
name: elaborate-flood-data
spec:
  image: ghcr.io/tn-aixpa/rs-flood-mapping:0.14.6
  command: python
---
kind: container+job
spec:
  template:
    args:
      - /shared/launch.sh
      - sentinel1_GRD_preflood_val_di_fassa_oct_2018
      - sentinel1_GRD_postflood_val_di_fassa_oct_2018
      - sentinel2_pre_flood_val_di_fassa_oct_2018
      - sentinel2_post_flood_val_di_fassa_oct_2018
      - POLYGON ((11.123570406000056 45.89602853500003, 11.123570406000056
        46.35080675000006, 11.833650907000049 46.35080675000006,
        11.833650907000049 45.89602853500003, 11.123570406000056
        45.89602853500003))
      - Slopes_TN
      - trentino_slope_map.tif
      - Lakes_TN
      - idrspacq.shp
      - Rivers_TN
      - cif_pta2022_v.shp
      - val_di_fassa_oct_2018
      - 2018-10-27
      - EPSG:25832
      - "['VV','VH']"
      - "900"
      - "17"
      - "9"
      - "4"
      - val di fassa
  volumes:
    - name: volume-flood
      spec:
        size: 100Gi
      volume_type: persistent_volume_claim
      mount_path: /app/data
  envs:
    - name: TMPDIR
      value: /app/data
  resources:
    cpu: "6"
    mem: 32Gi
  fs_group: 8877
  command: /bin/bash